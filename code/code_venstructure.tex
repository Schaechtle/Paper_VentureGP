\begin{mdframed}
\begin{minipage}{\linewidth}
\small
\belowcaptionskip=-10pt
\begin{lstlisting}[mathescape,label=alg:structureVent,basicstyle=\selectfont\ttfamily,numbers=none,escapechar=\#]
// GRAMMAR FOR KERNEL STRUCTURE
#\linenumber{1}#assume kernels = list(se, wn, lin, per, rq) // defined as above

// prior on the number of kernels
#\linenumber{2}#assume p_number_k = uniform_structure(n)
#\linenumber{3}#assume subset_kernels = tag(quote(grammar), 0,
#\linenumber{4}#                           subset(kernels, p_number_k))


// kernel composition
#\linenumber{5}#assume composition = proc(l) {
#\linenumber{6}#  if (size(l) <= 1)
#\linenumber{7}#       { first(l) }
#\linenumber{8}#  else { if (bernoulli()) 
#\linenumber{9}#                   { add_funcs(first(l), composition(rest(l))) }
#\linenumber{10}#              else { mult_funcs(first(l), composition(rest(l))) }
#\linenumber{11}#       }
#\linenumber{12}#  }
                          
#\linenumber{13}#assume K = tag(quote(grammar), 1, composition(subset_kernels))

#\linenumber{14}#assume (f_compute f_emu) = gpmem(f_look_up, K)

// Probe all data points
#\linenumber{15}#for n ... N
#\linenumber{16}#    predict f_compute(get_data_xs(n))

// PERFORMING INFERENCE  
#\linenumber{17}#infer  repeat(200, do(
#\linenumber{18}#                        mh(quote(grammar), one, 1),
#\linenumber{19}#                        for kernel in K: 
#\linenumber{20}# 			    mh(quote(parameters$_{\text{kernel}}$), one, 1)))
\end{lstlisting}

\end{minipage}
\end{mdframed}
