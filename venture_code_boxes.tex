\usepackage{listings}
\usepackage[framemethod=TikZ]{mdframed}% http://ctan.org/pkg/mdframed
\usepackage{setspace}
\usepackage{inconsolata} % will fit long lines into the box:w

\newdimen\linenumbersep
\newcommand{\linenumber}[1]{%
  \linenumbersep 4pt%
  \advance\linenumbersep\mdflength{innerleftmargin}%
  \advance\linenumbersep\mdflength{innerlinewidth}%
  \advance\linenumbersep\mdflength{middlelinewidth}%
  \advance\linenumbersep\mdflength{outerlinewidth}%
  \advance\linenumbersep\mdflength{linewidth}%
  \makebox[0pt][r]{{\rmfamily\tiny#1}\hspace*{\linenumbersep}}}



% Venture syntax highlighting for code boxes
\lstdefinelanguage{Venture}{
    alsoletter={\&,=,!,?}
    keywordstyle=\color{black},
    morecomment=[l]{//},
    commentstyle=\color{mygreen},
    keywordstyle=[2]\color{DarkRed},
    keywords=[2]{assume,predict,infer,observe,define,assume_list,sample,call_back,for},
    keywordstyle=[3]\color{myorange},
    keywords=[3]{if,then,else,lambda,tag,do,proc,repeat,run,pass,true,false,quote,default,all,one,begin,let,lte,letrec,set!},
    keywordstyle=[4]\color{mypurple},
    keywords=[4]{flip,normal,flip,bernoulli,uniform_continuous,uniform_structure,uniform_discrete,gamma,mh,rejection,array,max,length,list,first,second,gridsearch_argmax,apply,add_funcs,mult_funcs,subset,lookup,size,mem\&em,contains,stats,map,mapv,gpmem,quadmem,make_whitenoise, mem,make_gp,make_const_func,make_squaredexp,draw_gp_curves,exclude,closest_point,contents,set_contents,contents_changed?,contents_changed,mark_recently_changed,peek,increment,tail,repeatO,confine,return,print,get_neal_blackbox,get_neal_data_xs,get_data_xs,size,get_bayesopt_blackbox},
    literate=%
    *{0}{{{\color{DarkBlue}0}}}1
    {1}{{{\color{DarkBlue}1}}}1
    {2}{{{\color{DarkBlue}2}}}1
    {3}{{{\color{DarkBlue}3}}}1
    {4}{{{\color{DarkBlue}4}}}1
    {5}{{{\color{DarkBlue}5}}}1
    {6}{{{\color{DarkBlue}6}}}1
    {7}{{{\color{DarkBlue}7}}}1
    {8}{{{\color{DarkBlue}8}}}1
    {9}{{{\color{DarkBlue}9}}}1,
  }
\lstset{
  basicstyle=\singlespacing\ttfamily,
  language=Venture,
  showstringspaces=false,
}
